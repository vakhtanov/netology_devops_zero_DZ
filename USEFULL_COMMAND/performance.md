# Утилиты мониторинга производительности

* top – выводит список работающих в системе процессов и информацию о них
* atop – продвинутый интерактивный полноэкранный монитор производительности
* mpstat – выводит статистику по процессору
* iostat – мониторит использования дисковых разделов
* pidstat – выводит статистику по процессам
* vmstat – выводит статистику процессора, памяти и о процессах
* lvm – инструмент для работы LVM
* mdraid – программа для работы с массивами дисков

## Утилита top Режимы работы утилиты, горячие клавиши:
* Shift+M — сортировка по памяти (%MEM)
* Shift+T — сортировка процессов, который дольше всего работает
* Shift+N — сортировка процессов по их номеру (PID)
* Shift+P — сортировка по уровню потребления ресурсов процессора
* Shift+F — сортировка процессов по потреблению SWAP

* u — отфильтровать по имени пользователя
* o — сортировка по столбцам pri, size, res,cpu, time, thr
* S — показать системные процессы (по умолчанию они скрыты)
* m — переключение между режимами отображения нагрузки (процессор, память) и загрузки системы ввода-вывода
* a — показать абсолютные пути запущенныхпроцессов
* i — скрыть отображение простаивающих процессов
* P — показывать статистику загрузки по каждому процессору отдельно (для SMP систем)
* s — установить время обновления вывода информации (в секундах)
* k — уничтожить процесс (запрашивает у PID процесса)
* H — выключает отображение потоков

## Утилита atop Режимы работы утилиты shift + команда:
* m — выстроит процессы по занятой памяти
* d — построит процессы по использованию диска
* n — выстроит процессы по использованию сети (доступно только с установленным патчем)
* v — покажет более подробную информацию о процессах (пользователя, дату и время начала процесса)
* u — выстроит таблицу по самым прожорливым пользователям

Утилита по дефолту снимает показания каждые 10 минут, и сбрасывает их в лог /var/log/atop-YYYYMMDD
Файл конфигураций находится /etc/default/atop
Команда atopsar — это встроенный анализатор логов atop, который позволит быстро найти проблему и смотреть лог в нужное вам время
Основные ключи:
* b — с какого времени надо вывести лог
* e — до какого времени надо вывести лог

Поиск отдельных процессов:
* O — top-3 процессов CPU
* G — top-3 процессов RAM
* D — top-3 процессов диск
* N — top-3 процессов сеть

    Примеры команд:
    Нагрузка на RAM с 09:35:01 до 10:55:01 28 января
    # atopsar -r /var/log/atop/atop_20120116 -b 09:35:01 -e 10:55:01 -m
    Нагрузка по сетевым интерфейсам:
    atopsar -r /var/log/atop/atop_20120116 -i -b 00:40:00 -e 01:30:00
    Нагрузка на диски:
    atopsar -r /var/log/atop/atop_20120116 -d -b 01:10:00 -e 01:30:00
   
Пакет sysstat  – это набор инструментов мониторинга производительности для Linux. В состав пакета входят следующие утилиты:
* mpstat
* pidstat
* vmstat
* iostat

mpstat – отчет о использовании процессоров. В состав программы входят следующие ключи:
* A – выводит всю возможную информацию о процессорах и всю возможную информацию команды mpstat
* P – покажет индивидуальные процессоры или ядра вместе со статистикой Дополнительные параметры ALL {0..n}, где «n» – число процессоров

pidstat – используется для мониторинга процессов в режиме реального время. В состав программы входят следующие ключи:
* p xxx – выводит список процессов
  * xxx- ALL – выводит все процессы
  * xxx- номер процесса – выводит конкретный процесс и описание
* r – ключ для получения статистику об использования оперативной памяти и ошибок страниц
* С – отображение статистики по эффективности на основе имени процесса,
* l – позволяет просмотреть полный путь до к команде Например: pidstat -C mysql -l
* t – выводит на экран информацию в виде дерева Например: pidstat -t -C “mysql”
* rud – посмотреть всю статистику в горизонтальном виде и на одной строке

[https://itnan.ru/post.php?c=1&p=423049](https://itnan.ru/post.php?c=1&p=423049)
