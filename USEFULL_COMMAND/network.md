# Уровни представления информации
![pict/levels.JPG](pict/levels.JPG)

* физический уровень - витые пары и хабы (биты и боды) **L1**
* канальный уровень - стевые карты и коммутаторы (кадр) **L2**
* сетевой уровень - IP адреса, маршрутизатор, IP протоколы (пакеты) **L3**
* транспортный уровень - контрл передачи и доставки данных - протколы TCP/UDP (сегмент/датаграмма) **L4**
* сеансовый уровень - поддержание сеанса связи. завершение по времени H.245, NetBios **L5**
* уровень представления - формат данных. ASCII,EBCDIC.  JPG, TXT, EXE (файл)
* прикладной - доступ к сетевым службам SSH, HTTP, DHS, Telnet

![pict/net_model.JPG](pict/net_model.JPG)

![pict/net_model_pict2.JPG](pict/net_model_pict2.JPG)

![pict/osi-tcp-ip.JPG](pict/osi-tcp-ip.JPG)

## Физический уровень - L1
на физическом уровен могут воникать коллизии - устройства пеердают данные в среду пеердачи одновременно

## Канальный уровень
Канальный уровень обеспечивает связь в одном сегменте сети где устройства "физически" связаны
"Физически" - алегория один сегмент сети может образован логически путем виланов. Но в одном сегменте сети нет маршрутизаторов


Какой трафик Broadcast- всем кто в сети, Unicast - конкретному узлу, Multycast - нескольким узлам

![net2seg.JPG](./pict/net2seg.JPG)

![hub.JPG](pict/hub.JPG) Хаб - раздает потоки всем

![comm.JPG](pict/comm.JPG) Коммутатор

![route.JPG](pict/route.JPG) Маршрутизатор

**Канальный уровень - L2 - протокол ETHERNET IEEE 802.3 - передача кадрами

![ethernet.JPG](pict/ethernet.JPG)

ETHERNET - в рамках одного сегмента сети - адерсация по MAC адресам

**MTU - max transmition unit Максимальный размер кадра**

![mtu.JPG](pict/mtu.JPG)

### Канальный уровень решаемые проблемы
* Обнаружение ошибок физического уровня
* Одновременная передача данных разным устройствам
* Аппаратная адресаци

Цель разделения сети на сегменты 
* Оптимизациясетевого трафика
* и/или Повышение безопасности сети

Когда возникает необходимость разделить сеть на сегменты, а также в интернете - нужна двухуровневая адресация (по MAC адерсу и по IP)\
Также нужен маршрутизатор\
Address Resolution Protocol - ARP -протокол опеределения адреса - сопоставления MAC и IP\
Таблица ARP хранится на компе\
![arp.JPG](pict/arp.JPG)

`ip` - утилита для работы с канальным уровнем\
`ip link` - постомтерь сетевые интерфейсф иих физические (канальные) адреса\
`p neigh show dev eth1` - посмотреть ARP таблицу в ответеЖ\
*REACHABLE* - связь недавно была адрес, `lladdres` - link layer addres\
*STAIL* - запись желательно проверить
*FAILD* - не нашли узел
`ip neigh add 192.168.11.100 lladdr 00:00:00:00:00:AA dev eth1` - добавить запись в ARP таблицу для конкретного интерфейса\
`ip neighb del 192.168.11.100 dev eth1` - удалить.
*PERMANENT* - статическая запись ее нужно удалять в ручную, сама не удалится

Тамже с таблицей можно работать с помощью утилиты ARP. Для этого утанавливаем пакет **nettools**\
`arp -i eth1` - посмотерть таблицу\
`arp -s 192.168.11.100 00:00:00:00:00:AA` - добавить соответствие\
`arp -d 192.168.11.100` - удалить соответсвие

`arping` - утилита для отправки запросов на устройства в обход ограничений ICMP. Работает внутри одного сегмента сети\
`sudo arping -c 1 -I eth0 10.0.2.3`

`tcpdump` - анализ трафика проходящего через сетевой интерфейс\
`tcpdump -i any arp -nn -v -A -e`
![tcpdump](pict/tcpdump.JPG)
