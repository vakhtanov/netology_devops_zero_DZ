
## Регулярные выражения
"^" - начало строки\
"$" - конец строки\
"." - любой символ, обязятельно присутсвует\
[] [a-z][A-Z] - диапазон символов\
[^a-z] - исключение символов\
\* - любое количество символов (предыдущих) или отсутсвие\
.* - любые символы и любое их количество\
[c-e]* - любое количество любых символов из скобок\
\+ - одно или большее количество предыдущих символов\
? - одно наличие или отсутсвие предыдущего символа или диапазона \
_квантификаторы, задают количество повторений символа_\
{4} - 4 раза\
{4,} - не меньше 4 раз\
{4,7} - от 4 до 7 раз\
{,7} - не больше 7 раз\
аналоги\
\* = {0,}\
\+ = {1,}\
? = {0,1}\
_применение квантификаторов к группе символов_\
(...) - скобки показывают, что кванти применяются к группе\
"|" - логическое ИЛИ также применяется\
(Москва|Казань|Ленинград)+ - совпадение с одним из городов один или больше раз. даже если они без пробела

"\\" - экранирование следующего символа\
```^(https?:\/\/)?(www\.)?[a-z0-9\-]+\.[a-z]{2,4}$```

### Спецсимволы
```echo -e "asd\ndfg"```
\045 - знак доллара
\x09 - табуляция
вставить ТАБ в строку ctrl+v далее "TAB"


## GREP
grep -E 'regexp' file - можно применять расщиренные регулярные выражения\
-E — расширенное регулярное выражение (Extended Regexp)\
-v — инверсия вывода\
-с — подсчёт количества выводимых строк вместо их вывода\
-n — вывод номера строки\
-i — нечувствительность к регистру\
-r — рекурсивный поиск по всем файлам\

```tail - f /var/log/syslog | grp -E "\] (0-9){3} new objects"```

## SED 
_потоковый текстовый редактор - редактирует входящий текстовый поток с помощью регулярных выражений_\
sed 's/ads/dfas/g' file1 > file2\
's/' - режим замены 'ads' на 'dfas' '/g' - глобал все вхождения заменить

-E — позволяет использовать регулярные выражения в sed\
sed 'pattern/d' — удаляет строки, содержащие символы из pattern\
-i, --in-place — производит замену в изначальном файле file\
Если после ключа указать текст, будет создан бэкап

```bash
sed -Ei 's/Port [0-9]+/Port 2222/' file - заменить текст
sed -E '/^[^1-8]/d' FILE - удалить из файла строки без цифр 1-8 в начале
cat FILE sed -E '/^[^1-8]/d'  - удалить из ПОТОКА (для тренировки) строки без цифр 1-8 в начале
```

## AWK
_мощьный кекстовый редактор, скриптовый язык. входные данные можно представить как таблицы, строки - строки, слова столюцы - разделитель по умолчанию - пробел_
_параметры_\
```ps aux | awk'{ print $1 " " $11,$3 }'```\
секция BEGIN определяет начальные переменные\
```ps aux | awk' BEGIN { OFS=" ---" } { print $1 " " $11,$3 }'```\

$0 - вся строка целиком\
$1 - 1й столбец\
$2 - 2й стоблбец\
"-F РАЗДЕЛИТЕЛЬ" -  задает разделитель\

```bash
print
var = 'value'
if-then-else
while (i>0){}
```
_условие_\
```ps aux | awk'{ if ($2 <90000) print $1 ,$2 }'```

_цикл_\
``` cat /proc/loadavg awk '{ sum=0; i=1; while (i<4) {sum+=$i; i++} print $sum/3  }' ```

```ps aux | awk '{ pid=0; if (pid < $2) pid=$2} END { print pid }'``` - поиск максимаьного pid
```ps aux | awk '{ users[$1]+=$4} END {for (user in users) print user, users[user] }'``` - сумма памяти по пользователям

_сортировка и вывод уникальных значений_\
``` cat access.log | awk '{ print $9 }' | sort | uniq```\
```sort -g``` - сортирует сроки как числа\
'uniq' правльино работает только после сорт - уаляет одинаковые подряд идущие значения\
```uniq -c``` - вывести уникальные значения и подсчитать их количество\

_встроенные переменные_
FS — разделитель столбцов\
RS — разделитель строк\
OFS — выходной разделитель столбцов\
ORS — выходной разделитель строк\

awk -f FILE - вызов скритпта из файла

a=gensub("WHAT","ON WHAT","g", WHERE - $3); print a - внутри awk функция замены, в двнном случае - глобальной. Текст помещаем в 'a'\
__gensub в пакете gawk__\
_анализ трафика - в дампе TCP орезаем порт и выводим только только перенаправления откуда, куда_
```bash
cat tcpdump.txt | awk -f awk_script
{a=gensub("\.[a-z0-9]+$","","g",$3);b=gensub("\.[a-z0-9:]+$","","g",$5); print a $4 b;}
```

## Текстовые утилиты
```cat``` - вывод файлов на экран, объединение файлов\
```cat -A ``` - вывод файлов на экран, выводит не печатные символы\
`head` - вывести стоки с начала файла (10 по умолчанию)\
`tail` - вывести с конца\
`-n NUMBER` - параметр для заания количества строк\
`tail -f` - следить за измененями в файл в реальном режиме времени\
`wc -l` - подсчитать количество строк, `wc -w` - слов, `wc -с` - байт\
`wc` - выводит СТРОКИ СЛОВА БАЙТЫ\
`wc -L` - длина самой длинной строки

## LESS
```less``` - продвинутая улитита для просмотра файлов\
`-N` - ключ для нумерации строк\
### Управление внутри less
`g` - прейти в начало файла, `G` - перейти в конец файла\
`ng` - перейти на строку `n`\
`q` - выйти из less\
`/text` - поиск текста вперед, `?text` - поиск текста назад `n` - перейти в следующему `N` - прейти к предыдущему 

## Sort - утилита сортировки

`sort -n` - сортирвоать строки как числа `sort -h` - сортировать строки как числа в человекочитаемом формате (вывод `du -h`)\
`-r` - обратная сортировка\
`-t 'divider'` - задать разделитель столбцов `-kNUMBER` - задать номер столбца по которому сортировать\
`sort -t ':' -nk3 /etc/passwd` - сортировать файл с пользователями по колонке с идентификатором\
`-b` - Пробелы в начале сортируемых полей или в начале ключей будут игнорироваться\
`-d` - При сортировке будут игнорироваться все символы, кроме букв, цифр и пробельных символов\
`-f` - Игнорирование регистра букв\
`-r` - Сортировка в обратном порядке\
`-o файл` - Вывод результатов сортировки в файл\
`-t символ` - Использование указанного символа в качестве разделителя полей\
`-n` - Сортировка числовых значений\
`-h` - Сортировка удобочитаемых цифр: 2K 1G 100M\
`-k` - Сортировка по указанному диапазону столбцов\
`-u` - Убрать повторы — аналог команды uniq

`split -NUMBER` - разбивает файл на файлы с заданным количеством строк (по умолчанию 1000)

## cut
`-c` - Cписок символов: --characters= Извлекает фрагмент строки, определяемый списком символов. Список может включать один или несколько числовых диапазонов, разделённых запятыми \
`-f` - Cписок полей: --fields= Извлекает одно или несколько полей из строки, как определено аргументом списка символов. Список может включать одно или несколько полей или диапазонов полей, разделённых запятыми\
`-d` - Символ-разделитель: --delimiter= В присутствии параметра `-f` в качестве разделителя полей используется символ-разделитель. По умолчанию поля должны отделяться друг от друга одним символом табуляции `--complement`. `-d` извлекает строку текста целиком, кроме фрагментов, определяемых параметром -c и/или -f\
`cut -d':' -f1 /etc/passwd` - выводит строки только из 1 го столбца файла, где разделители - `:`\
`--output_delimeter=` - разделитель на выходе\
`cut -c1-5` - вырезать с первого по 5й символы `cut -c7-` - вырезать все начиная с 7го символа

## locate - быстрый поиск в базе данных имен файлов
утилиту нужно устанавливать\
`sudo updatedb` - обновить базу данных locate\
`locate NAME` - найти файл в базе\
`locate -у NAME` - найти файл в базе и проверить его существование\
`locate -regex '(\.jpg|\.mp3)$` - найти по регулярным выражениям

## find - поиск непосредственно в файловой системе
`find WHERE -type d` - вывести список каталогов\
`find WHERE -type f` - вывести список файлов\
`b` - Специальный файл блочного устройства\
`с` - Специальный файл символьного устройства\
`d` - Каталог\
`f` - Обычный файл\
`l` - Символическая ссылка\
`find ~ -type f -name "*.JPG" -size +1M` - все обычные файлы с именами, соответствующими шаблону \*.JPG, которые имеют размер больше 1 мегабайта\
`b` - Блоки размером по 512 байт (используетсяпо умолчанию, если иное не указано явно)\
`с` - Байты\
`w` - 2-байтные слова\
`k` - Килобайты — блоки по 1024 байта\
`M` - Мегабайты — блоки по 1 048 576 байт\
`G` - Гигабайты — блоки по 1 073 741 824 байт\
`find /tmp -size -5M -mtime +3 -type f` - найти в дирректории tmp файлы размером меньше 5 мегабайти и старше 3х дней\
`--delete` - удалить файлы














